<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">





<mapper namespace="soomgosusta.mapper.ExpertMapper">
	<cache />
	
	<insert id="registerExpert" parameterType="Expert">
	insert into expert values(#{expert_Id}, #{e_Password}, #{e_Name},
	#{e_Pnum},#{e_Gender} , #{e_Age},'expert', #{e_Photo})
	</insert>

		
	<select id="expertLogin" parameterType="String" resultType="Expert">
	select *
	FROM expert
	where expert_id = #{id}
	</select>
	
	<resultMap type="Expert_FindInfo" id="Expert_FindInfo">
		<result column="expert_id" property="ef_Id"/>
		<result column="ep_lineletter" property="ef_LineLetter"/>
		<result column="ei_district" property="ef_District"/>
		<result column="e_photo" property="ef_Photo"/>
	</resultMap>
	
	<select id="listExpertFind" parameterType="hashmap" resultMap="Expert_FindInfo">
		SELECT e.expert_id, ep.ep_lineletter, ei.ei_district, e.e_photo, c.c_code
		from expert e JOIN expert_information ei
		ON e.expert_id = ei.infor_expert_id
		JOIN expert_profile ep
		ON e.expert_id = ep.profile_expert_id
  		JOIN category c
  		ON ei.c_code = c.c_code	
		WHERE c.c_word LIKE #{category}
		AND ei.ei_district LIKE #{district}
	</select>
	
</mapper>


