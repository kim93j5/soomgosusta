<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">



<mapper namespace="soomgosusta.mapper.RequestMapper">
	<cache />

	<select id="listQuestion" parameterType="hashmap" resultType="Question">
		select * from question
			<where>
				q_code LIKE #{question_Code1} 
				OR q_code LIKE #{question_Code2}
				OR q_code LIKE #{question_Code3}
			</where>
	</select>
	
	<select id="listAnswer" parameterType="String" resultType="Answer">
		select * from answer where q_code= #{question_Code} order by a_code
	</select>
	
	<insert id="insertRequest" parameterType="hashmap">
		 insert into request values(#{member_Id}, #{searchCode}, seq_test.nextval, #{r_qa_1},#{r_qa_2},#{r_qa_3},#{r_qa_4},#{r_qa_5},#{r_qa_6},#{r_qa_7},
		#{r_qa_8},#{r_qa_9},#{r_qa_10},#{r_qa_11},#{r_qa_12},#{r_qa_13},#{r_qa_14},#{r_qa_15}, sysdate, 'ing')

	</insert>
	
	<update id="updateLogRequest">
		update category_log set cl_request = cl_request+1 where log_c_code = #{searchCode}
	</update>
	
 	<select id="listAlreadySend" parameterType="hashmap" resultType="Request">
 		SELECT * from request 
		WHERE request_member_id = #{m_Id}
		AND request_c_code = #{c_Code}
		AND r_status = 'ing'
	</select>

	
	<select id="sendRequestInfo" resultType="Request" parameterType="String">		
		 select * from request where request_member_id = #{request_Member_Id}
	</select>
	
	<select id = "listEmploymentLog" parameterType="String" resultType="int">
		select cl.cl_employment
		from category_log cl join category c
		on cl.log_c_code = c.c_code
		where c.c_word like #{searchKey}
	</select>
	
</mapper>

